define("app/myincome",["../mod/pagelist","../plugs/version"],function(require,exports,module){var e=require("../mod/pagelist");require("../plugs/version");$("#nav").on("click","li",function(){var e=$(this).data("id");$(this).addClass("active").siblings().removeClass("active"),$("#"+e).show().siblings(".main-list").hide()}),"cash"==Tools.getQueryValue("type")&&$('#nav li[data-id="rmbListWrap"]').click(),$("#wave .w1").addClass("slideOutLeft"),$("#wave .w2").addClass("slideOutLeft1"),Ajax.custom({url:"api/v1/coin/info"},function(e){var t=e.data;$("#ERD").text(t.exchange_rate_desc),$("#YCI").text(t.yesterday_coin_income),$("#YCTR").text(t.yesterday_coin_to_rmb)}),e.fun({url:"api/v1/coin/list",renderFor:"#goldList-tmpl",renderEle:"#goldList",pagingDom:"#goldPage",data:{page:1,page_size:20}},function(e){5==e.page&&$("#goldPage").html('<div class="laypage_main"><span>仅可查看最近100条数据</span></div>')}),e.fun({url:"api/v1/income/list",renderFor:"#rmbList-tmpl",renderEle:"#rmbList",pagingDom:"#rmbPage",data:{page:1,page_size:20}},function(e){for(var t=0;t<e.data.length;t++)e.data[t].amount=e.data[t].amount<0?""+e.data[t].amount:"+"+e.data[t].amount;5==e.page&&$("#rmbPage").html('<div class="laypage_main"><span>仅可查看最近100条数据</span></div>')})}),define("mod/pagelist",["./base","../plugs/laypage"],function(require,exports,module){var e=require("./base"),t=require("../plugs/laypage");window.Ajax=e,exports.defaultListTmpl="#conList-tmpl",exports.defaultListEle="#conList",exports.pagingDom="#listPage",exports.fun=function(a,n,i){var r=(a.data.page,{renderFor:this.defaultListTmpl,renderEle:this.defaultListEle,pagingDom:this.pagingDom,showLoading:!0,hasNext:!0,logtype:"paging"});for(var o in r)a[o]=a[o]||r[o];t({cont:$(a.pagingDom),pages:100,groups:0,curr:1,prev:!1,next:"点击查看更多",skin:"flow",jump:function(t){var r=this;a.data.page=t.curr,e.baseAjax(a,function(o){1020==o.status?(o.data=null,e.render(a.renderEle,a.renderFor,o,void 0,!0),$(a.pagingDom).remove()):(r.pages=o.total,t.curr==o.total&&(a.hasNext=!1,$(a.pagingDom).find(".laypage_main").html("<span>没有更多数据</span>")),$.each(o.data,function(){this.added_time=e.formatDate(this.added_time)}),i||$.isFunction(n)&&n(o),1!=o.page?e.render(a.renderEle,a.renderFor,o,void 0,!1):e.render(a.renderEle,a.renderFor,o,void 0,!0),i&&$.isFunction(n)&&n(),$(a.pagingDom).removeClass("hide"))},function(e,t,a){"function"==typeof callbackError&&callbackError(e,t,a)})}}),window.onscroll=function(){if(a.hasNext){var e=document.body.scrollTop,t=document.body.scrollHeight;e+window.screen.height*window.devicePixelRatio+100>t&&$("#laypage_0 a").click()}}}}),define("mod/base",["zepto","../plugs/doT.min","./tools"],function(require,exports,module){function e(e,t){var a=e,n={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}function t(e){var t,a=function(){};if(!e.status)return void Tools.alertDialog({title:"提醒",text:"系统错误，请稍后重试！"});switch(e.status){case 1101:t={title:"提醒",text:"请打开设置->通用->日期与时间校准您的系统时间"};break;case 1004:t={title:"提醒",text:"请在#ProjectName#中登录再访问！"};break;case 1002:t={title:"提醒",text:"请在#ProjectName#中访问！"};break;case 1006:var n=5;t={title:"提醒",text:"访问太过频繁，<span id='closeTimer'>"+n+"</span>s后自动刷新"};var i=setInterval(function(){n--,n<1&&(clearInterval(i),window.location.reload()),$("#closeTimer").text(n)},1e3);break;default:return t=null,!0}return null!=t?(Tools.alertDialog(t,a),!1):void 0}var $=require("zepto");var a=require("../plugs/doT.min"),n={key:"26817749",km_api:server+"km_task/"};require("./tools"),module.exports={formatDate:function(t,a){var n=a||"yyyy-MM-dd hh:mm";if(isNaN(t)||null==t)return t;if("object"==typeof t){var i=dd.getFullYear(),r=dd.getMonth()+1,o=dd.getDate();r<10&&(r="0"+r);var s=i+"-"+r+"-"+o,l=s.match(/(\d+)/g),u=new Date(l[0],l[1]-1,l[2]);return e(u,n)}var u=new Date(parseInt(t));return e(u,n)},baseAjax:function(e,a){var i={name:"app_key",value:n.key};e.showLoading&&(0==$(".ui-loading-block").length?$("body").append('<div class="ui-loading-block km-dialog show"><div class="ui-loading-cnt"><i class="ui-loading-bright"></i><p>加载中……</p></div></div>'):$(".ui-loading-block").addClass("show"),"paging"==e.logtype&&0!=e.data.skip||$(e.renderEle).hide()),e.data||(e.data={}),$.isFunction(e.data.push)?e.data.push(i):e.data.app_key=n.key,$.isFunction(e.data.push)?e.data.push({name:"auth_token",value:Tools.auth_token()}):e.data.auth_token=Tools.auth_token(),$.ajax({url:n.km_api+e.url,data:e.data,type:"GET",dataType:"jsonp",xhrFields:{withCredentials:!0},jsonpCallback:"jsonp"+Math.ceil(1e3*Math.random()),success:function(n){e.showLoading&&($(".ui-loading-block").removeClass("show"),"paging"==e.logtype&&0!=e.data.skip||$(e.renderEle).show()),t(n)&&a(n)},error:function(t,a,n){console.log(t),e.showLoading&&$(".ui-loading-block").removeClass("show"),"paging"!=e.logtype&&$(e.renderEle).show()}})},render:function(e,t,n,i,r){if($(t).length>0&&n){var o=i||void 0,s=$(t).text(),l=a.template(s,void 0,o);r?$(e).html(l(n)):$(e).append(l(n))}},custom:function(e,t){var a=this;e=e||{},e.logtype="custom",a.baseAjax(e,t)}}}),define("plugs/doT.min",[],function(require,exports,module){function e(t,a,n){return("string"==typeof a?a:a.toString()).replace(t.define||o,function(e,a,i,r){return 0===a.indexOf("def.")&&(a=a.substring(4)),a in n||(":"===i?(t.defineParams&&r.replace(t.defineParams,function(e,t,i){n[a]={arg:t,text:i}}),a in n||(n[a]=r)):new Function("def","def['"+a+"']="+r)(n)),""}).replace(t.use||o,function(a,i){t.useParams&&(i=i.replace(t.useParams,function(e,t,a,i){if(n[a]&&n[a].arg&&i)return e=(a+":"+i).replace(/'|\\/g,"_"),n.__exp=n.__exp||{},n.__exp[e]=n[a].text.replace(new RegExp("(^|[^\\w$])"+n[a].arg+"([^\\w$])","g"),"$1"+i+"$2"),t+"def.__exp['"+e+"']"}));var r=new Function("def","return "+i)(n);return r?e(t,r,n):r})}function t(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var a,n={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};n.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},a=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(a,function(e){return t[e]||e}):""}},a=function(){return this||(0,eval)("this")}(),void 0!==module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):a.doT=n;var i={start:"'+(",end:")+'",startencode:"'+encodeHTML("},r={start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("},o=/$^/;n.template=function(s,l,u){l=l||n.templateSettings;var p,c,d=l.append?i:r,g=0;s=l.use||l.define?e(l,s,u||{}):s,s=("var out='"+(l.strip?s.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):s).replace(/'|\\/g,"\\$&").replace(l.interpolate||o,function(e,a){return d.start+t(a)+d.end}).replace(l.encode||o,function(e,a){return p=!0,d.startencode+t(a)+d.end}).replace(l.conditional||o,function(e,a,n){return a?n?"';}else if("+t(n)+"){out+='":"';}else{out+='":n?"';if("+t(n)+"){out+='":"';}out+='"}).replace(l.iterate||o,function(e,a,n,i){return a?(g+=1,c=i||"i"+g,a=t(a),"';var arr"+g+"="+a+";if(arr"+g+"){var "+n+","+c+"=-1,l"+g+"=arr"+g+".length-1;while("+c+"<l"+g+"){"+n+"=arr"+g+"["+c+"+=1];out+='"):"';} } out+='"}).replace(l.evaluate||o,function(e,a){return"';"+t(a)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),p&&(l.selfcontained||!a||a._encodeHTML||(a._encodeHTML=n.encodeHTMLSource(l.doNotSkipEncoded)),s="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+n.encodeHTMLSource.toString()+"("+(l.doNotSkipEncoded||"")+"));"+s);try{return new Function(l.varname,s)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+s),e}},n.compile=function(e,t){return n.template(e,null,t)},module.exports=n}),define("mod/tools",[],function(require){var e={getQueryValue:function(e){var t=location.search,a=new Array;if(t.length>1){var n=t.indexOf("?");t=t.substring(n+1,t.length)}else t=null;if(t)for(var i=0;i<t.split("&").length;i++)a[i]=t.split("&")[i];for(var r=0;r<a.length;r++)if(a[r].split("=")[0]==e)return decodeURI(a[r].split("=")[1]);return""},uid:function(){return this.getQueryValue("uid")||"null"},auth_token:function(){return this.getQueryValue("auth_token")||"null"},alertDialog:function(e,t){var a={title:null,text:null,img:null,time:3e3};for(var n in a)e[n]=e[n]||a[n];var i="tips"+(new Date).getTime(),r='<div id="'+i+'" class="ui-popup-screen km-dialog"><div class="ui-overlay-shadow km-popup">';e.time<1&&(r+='<i class="iconfont icon-close" id="close"></i>'),r+='<div class="content">',null!=e.title&&""!=e.title&&(r+="<h1>"+e.title+"</h1>"),null!=e.text&&""!=e.text&&(r+="<p>"+e.text+"</p>"),null!=e.img&&""!=e.img&&(r+='<div class="pic"><img src="'+e.img+'"/></div>'),r+="</div> </div> </div>";var o=$(r).appendTo("body"),s=$("#"+i+" .km-popup").height(),l=$(window).height(),u=(l-s)/2;if($("#"+i+" .km-popup").css("top",u),o.addClass("show-dialog"),$("#close").click(function(){$("#"+i).remove(),$.isFunction(t)&&t()}),e.time>0){var p=e.time;setTimeout(function(){$("#"+i).remove(),$.isFunction(t)&&t()},p)}}};window.Tools=e}),function(){"use strict";function e(n){var i="laypagecss";e.dir="dir"in e?e.dir:r.getpath+"../css/skin/laypage.css",new r(n),e.dir&&!t[a](i)&&r.use(e.dir,i)}e.v="1.3";var t=document,a="getElementById",n="getElementsByTagName",i=0,r=function(e){var t=this;(t.config=e||{}).item=i++,t.render(!0)};r.on=function(e,t,a){return e.attachEvent?e.attachEvent("on"+t,function(){a.call(e,window.even)}):e.addEventListener(t,a,!1),r},r.getpath=function(){var e=document.scripts,t=e[e.length-1].src;return t.substring(0,t.lastIndexOf("/")+1)}(),r.use=function(e,t){},r.prototype.type=function(){var e=this.config;return"object"==typeof e.cont?void 0===e.cont.length?2:3:void 0},r.prototype.view=function(){var t=this,a=t.config,n=[],i={};if(a.pages=0|a.pages,a.curr=0|a.curr||1,a.groups="groups"in a?0|a.groups:5,a.first="first"in a?a.first:"&#x9996;&#x9875;",a.last="last"in a?a.last:"&#x5C3E;&#x9875;",a.prev="prev"in a?a.prev:"&#x4E0A;&#x4E00;&#x9875;",a.next="next"in a?a.next:"&#x4E0B;&#x4E00;&#x9875;",a.pages<=1)return"";for(a.groups>a.pages&&(a.groups=a.pages),i.index=Math.ceil((a.curr+(a.groups>1&&a.groups!==a.pages?1:0))/(0===a.groups?1:a.groups)),a.curr>1&&a.prev&&n.push('<a href="javascript:;" class="laypage_prev" data-page="'+(a.curr-1)+'">'+a.prev+"</a>"),i.index>1&&a.first&&0!==a.groups&&n.push('<a href="javascript:;" class="laypage_first" data-page="1"  title="&#x9996;&#x9875;">'+a.first+"</a><span>&#x2026;</span>"),i.poor=Math.floor((a.groups-1)/2),i.start=i.index>1?a.curr-i.poor:1,i.end=i.index>1?function(){var e=a.curr+(a.groups-i.poor-1);return e>a.pages?a.pages:e}():a.groups,i.end-i.start<a.groups-1&&(i.start=i.end-a.groups+1);i.start<=i.end;i.start++)i.start===a.curr?n.push('<span class="laypage_curr" '+(/^#/.test(a.skin)?'style="background-color:'+a.skin+'"':"")+">"+i.start+"</span>"):n.push('<a href="javascript:;" data-page="'+i.start+'">'+i.start+"</a>");return a.pages>a.groups&&i.end<a.pages&&a.last&&0!==a.groups&&n.push('<span>&#x2026;</span><a href="javascript:;" class="laypage_last" title="&#x5C3E;&#x9875;"  data-page="'+a.pages+'">'+a.last+"</a>"),i.flow=!a.prev&&0===a.groups,(a.curr!==a.pages&&a.next||i.flow)&&n.push(function(){return i.flow&&a.curr===a.pages?'<span class="page_nomore" title="&#x5DF2;&#x6CA1;&#x6709;&#x66F4;&#x591A;">'+a.next+"</span>":'<a href="javascript:;" class="laypage_next" data-page="'+(a.curr+1)+'">'+a.next+"</a>"}()),'<div name="laypage'+e.v+'" class="laypage_main laypageskin_'+(a.skin?function(e){return/^#/.test(e)?"molv":e}(a.skin):"default")+'" id="laypage_'+t.config.item+'">'+n.join("")+function(){return a.skip?'<span class="laypage_total"><label>&#x5230;&#x7B2C;</label><input type="number" min="1" onkeyup="this.value=this.value.replace(/\\D/, \'\');" class="laypage_skip"><label>&#x9875;</label><button type="button" class="laypage_btn">&#x786e;&#x5b9a;</button></span>':""}()+"</div>"},r.prototype.jump=function(e){if(e){for(var t=this,a=t.config,i=e.children,o=e[n]("button")[0],s=e[n]("input")[0],l=0,u=i.length;u>l;l++)"a"===i[l].nodeName.toLowerCase()&&r.on(i[l],"click",function(){var e=0|this.getAttribute("data-page");a.curr=e,t.render()});o&&r.on(o,"click",function(){var e=0|s.value.replace(/\s|\D/g,"");e&&e<=a.pages&&(a.curr=e,t.render())})}},r.prototype.render=function(e){var n=this,i=n.config,r=n.type(),o=n.view();2===r?i.cont.innerHTML=o:3===r?i.cont.html(o):t[a](i.cont).innerHTML=o,i.jump&&i.jump(i,e),n.jump(t[a]("laypage_"+i.item)),i.hash&&!e&&(location.hash="!"+i.hash+"="+i.curr)},"function"==typeof define?define("plugs/laypage",[],function(){return e}):"undefined"!=typeof exports?module.exports=e:window.laypage=e}(),define("plugs/version",[],function(require,exports,module){var e,t={},a=navigator.userAgent,n=["Mozilla/5.0 (Linux; Android 6.0.1; MI 4LTE Build/MMB29M; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/46.0.2490.76 Mobile Safari/537.36 ssy={Android;KuaiMaBrowser;V1.2.1;360;;MOBILE}","Mozilla/5.0 (iPhone; CPU iPhone OS 10_2 like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92  ssy={iOS;KuaiMaBrowser;V1.2.2;AppStore;101010300;;libertyad;ebrowser;}","Mozilla/5.0 (iPhone; CPU iPhone OS 10_2 like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92  ssy={KuaiMaBrowser;V1.2.0;AppStore;101010300;;libertyad;ebrowser;}","Mozilla/5.0 (iPhone; CPU iPhone OS 10_2 like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92  ssy={KuaiMaBrowser;V1.1.1;AppStore;101010300;;libertyad;ebrowser;}","Mozilla/5.0 (iPhone; CPU iPhone OS 10_2 like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92  ssy={KuaiMaBrowser;V1.0.0;AppStore;101010300;;libertyad;ebrowser;}"],a=n[1];if(t.isKM=/KuaiMa/.test(a),t.isKM){var i=a.split("ssy=")[1];e=/iOS|Android/.test(i.split(";")[0])?i.split(";")[2]:i.split(";")[1],t.version=e.replace("V","")}t.equal=function(e){return!!t.isKM&&e==this.version},t.greater=function(e){if(t.isKM){for(var a=this.version.split("."),n=e.split("."),i=!1,r=0;r<a.length&&!(a[r]<n[r]);r++)a[r]>n[r]&&(i=!0);return i}return!1},t.less=function(e){if(t.isKM){for(var a=this.version.split("."),n=e.split("."),i=!1,r=0;r<a.length&&!(a[r]>n[r]);r++)a[r]<n[r]&&(i=!0);return i}return!1},t.gEq=function(e){return!(!this.equal(e)&&!this.greater(e))},t.lEq=function(e){return!(!this.equal(e)&&!this.less(e))},module.exports=t});