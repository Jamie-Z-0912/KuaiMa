define("app/taskCenter",["../mod/pagelist","../plugs/storageCache.js","../plugs/version","../plugs/timer.js","../plugs/tipsAd.js","../plugs/secondPage.js"],function(require,exports,module){function e(){Ajax.custom({url:"api/v1/task/junior"},function(e){var t=e.data;if(t.show_junior_task){$("#newbie_school").on("click",function(){var e=$(this);a.less("1.4.2")?l.updateApp():$("#newbie_school .over").length>0?window.location="kmb://newbie":l.getCoin("read_tutorial",function(){Tools.alertDialog({text:"获得"+e.data("num")+"金币"}),setTimeout(function(){$("#newbie_school .right").text("已完成").addClass("over"),window.location="kmb://newbie"},900)})}),$("#newbie_search").on("click",function(){a.less("1.3.2")?l.updateApp():window.location="kmb://hotsearch"}),$("#newbie_read").on("click",function(){window.location="kmb://main"}),$("#newbieTask").show();var i=($("#newbieDays li").length,t.can_receive_junior_reward_day_num),o=t.receive_junior_reward_day_num;0!=i&&$("#newbieDays li").eq(i-1).addClass("can_get");for(var s=0;s<o;s++)$("#newbieDays li").eq(s).addClass("has_get");t.has_read_tutorial&&$("#newbie_school .right").text("已完成").addClass("over"),t.has_first_read_article&&$("#newbie_read .right").text("已完成").addClass("over"),t.has_first_search&&$("#newbie_search .right").text("已完成").addClass("over");var r=["junior_first_day_reward","junior_second_day_reward","junior_third_day_reward","junior_fourth_day_reward","junior_fifth_day_reward","junior_sixth_day_reward","junior_seventh_day_reward"];$("#newbieDays").on("click","li",function(){var e=$(this),t=e.index(),a=e.data("num"),i="成功领取"+a+"金币";e.hasClass("card")&&(i="获得一张"+a+"天加速卡"),e.hasClass("can_get")?l.getCoin(r[t],function(){new n({type:"ok",subtit:i,text:"得到第"+(t+1)+"天奖励",hasAd:"0"}),e.removeClass("can_get").addClass("has_get")}):e.hasClass("has_get")?Tools.alertDialog({text:"你已领过第"+(t+1)+"天的奖励"}):Tools.alertDialog({text:"第"+(t+1)+"天领取时间未到！"})})}else Storage.setCache(Storage.AUTH,Tools.auth_token()),$("#newbieTask").remove()})}var t=require("../mod/pagelist");require("../plugs/storageCache.js");var a=require("../plugs/version"),i=require("../plugs/timer.js"),n=require("../plugs/tipsAd.js"),o=require("../plugs/secondPage.js");if("null"==Tools.auth_token()){var s={title:"提醒",text:"请在快马小报中登录再访问！",time:5e3};return void Tools.alertDialog(s,function(){window.location="kmb://alertlogin"})}if(a.less("1.1.0"))return Tools.alertDialog({title:"重大更新",text:'快马小报全新改版<br>签到每次得0.5元<br></br><a style="background-color:#fa0;color:#fff;display:inline-block;padding: 5px 10px;" href="http://a.app.qq.com/o/simple.jsp?pkgname=com.kuaima.browser">马上更新</a>',time:"0"}),void $("#close").remove();var r={expire:function(){var e=new Date,t=e.toLocaleDateString(),a=Math.ceil(e.getTime()/1e3),i=new Date(t+" 23:50:00").getTime()/1e3;return i-a>0?i-a:null},over:function(){this.expire()&&Storage.setCache("checkin","over",this.expire()),$("#checkin").hide(),$("#signinNormal").text("已签到"),$("#norCheckin").show()},normal:function(){this.expire()&&Storage.setCache("checkin","normal",this.expire()),$("#checkin").hide(),$("#signinNormal").addClass("checkin"),$("#norCheckin").show()}},l={downLink:function(){return/iPhone|iPad|iPod/.test(a.userAgent)?"https://itunes.apple.com/gb/app/id1217748676?mt=8":"http://a.app.qq.com/o/simple.jsp?pkgname=com.kuaima.browser"},updateApp:function(){var e='<div class="pop-mask km-dialog"></div><div class="pop-screen km-dialog update_pop"><div class="box"><h2>升级新版本</h2><div class="text"><img src="image/tc-update.png" style="width:100%"><p>开启新任务，快来赚更多！</p></div><div class="btnbox"><a href="'+this.downLink()+'">去升级</a></div></div></div>';$("body").append(e)},getCoin:function(e,t){Ajax.custom({url:"api/v1/task/receiveReward",data:{eventType:e}},function(e){1e3!=e.status?Tools.alertDialog({text:e.desc}):$.isFunction(t)&&t()})}},c=700,u=!1;if(Storage.getCache(Storage.AUTH)==Tools.auth_token()&&Storage.getCache("checkin")){var d=Storage.getCache("checkin");r[d]()}else Storage.remove("checkin"),Ajax.custom({url:"api/v1/checkin/setting"},function(e){var t=e.data;"common_checkin"==t.checkin_type&&(u=!0),c=t.commission||700,t.is_checkin?(Storage.set("hasCheckin","1",!0),r.over()):t.left_num>0?($("#leftNum").text("今日剩余 "+t.left_num+"/"+t.total_num),$("#timer").prev().text("距离开始还有"),new i("#timer",t.left_seconds,t.is_start,function(){$("#signin").addClass("checkin"),Storage.get("hasCheckin",!0)&&1==Storage.get("hasCheckin",!0)&&r.over()})):(u&&r.normal(),$("#signin").text("已抢光").addClass("over"))});if($("#hotSearch").show(),$("#hotSearch").on("click",function(){a.less("1.3.2")?l.updateApp():window.location="kmb://hotsearch"}),a.less("1.2.0")&&$("#replyC, #likeC").on("click",function(){l.updateApp()}),Storage.getCache(Storage.AUTH)){var p=Storage.getCache(Storage.AUTH);Tools.auth_token()!=p&&(e(),Storage.remove(Storage.AUTH))}else e();Ajax.custom({url:"api/v1/task/daily"},function(e){var t=e.data;t.show_daily_fuli&&($("#welfare").show(),t.has_join_fuli_act&&$("#welfare h6").text("已完成").addClass("over"),$("#welfare").on("click",function(){var e=$(this);$("#welfare .over").length>0?window.location=t.daily_fuli_task.origin_url:l.getCoin("join_fuli_act",function(){Tools.alertDialog({text:"获得"+e.data("num")+"金币"}),setTimeout(function(){$("#welfare h6").text("已完成").addClass("over"),window.location=t.daily_fuli_task.origin_url},1e3)})})),$("#hotSearch h6").text(t.search_task_status),$("#readMesA, #gatherA").show(),"open"!=Tools.getQueryValue("notice")?$("#readMesA").on("click",function(){a.less("1.4.2")?l.updateApp():window.location="kmb://sysnotificationsetting"}):($("#readMesA h6").text(t.read_push_status),$("#readMesA").addClass("tips"),$("#readMesA").on("click",function(){Tools.alertDialog({text:"阅读每日推送文章<br>可获得额外金币奖励"})})),$("#gatherA").on("click",function(){t.has_caiji_permission?a.less("1.4.0")?l.updateApp():window.location="kmb://worthreadingtab":a.less("1.4.2")?l.updateApp():window.location="kmb://applyworthreading"})});var g=Storage.getCache("adImgs");g||(g=[],Ajax.custom({url:"api/v1/ads",data:{location:"checkin_alert"}},function(e){for(var t=0;t<e.data.length;t++){var a={img:"",link:""};a.img=e.data[t].images[0],a.link=e.data[t].origin_url,g.push(a)}Storage.setCache("adImgs",g,600)})),$("#rule").on("click",function(){new n({type:"rule",subtit:"每天上午10点准时开抢",text:"开启提醒，快人一步！<br>数量有限，先到先得！",hasAd:"0",isClose:"no",btnType:"1"})}),$("#signin").on("click",function(){var e=$(this);if(e.hasClass("checkin")){e.removeClass("checkin");var t=Math.floor(Math.random()*g.length),a=new n({type:"waiting",subtit:"拼命疯抢中…",isClose:"no",adImg:g[t].img,adLink:g[t].link});setTimeout(function(){Ajax.custom({url:"api/v1/checkin"},function(e){if(a.close(),1e3==e.status){r.over(),Storage.set("hasCheckin",1,!0);var t=Math.floor(Math.random()*g.length);new n({type:"ok",title:"签到成功",text:"恭喜你获得"+e.data.commission+"金币",adImg:g[t].img,adLink:g[t].link});var i=document.createElement("iframe");i.src="kmb://refreshgold",i.style.display="none",$("body").append(i),$(i).remove()}if(9001==e.status&&(Storage.set("hasCheckin",1,!0),r.over(),Tools.alertDialog({text:"今天已签到，明天再来吧"})),3001==e.status||3004==e.status){var t=Math.floor(Math.random()*g.length);r.normal(),new n({type:"over",title:"太遗憾没抢到",text:"还有 普通签到 等你参加",adImg:g[t].img,adLink:g[t].link})}})},1e3)}else{if($(this).hasClass("over")){var t=Math.floor(Math.random()*g.length);return void new n({type:"over",title:"手慢了",text:"今日已抢光，明天10点再来吧",adImg:g[t].img,adLink:g[t].link})}Tools.alertDialog({text:"签到未开始，稍后再试",time:"0"})}}),$("#signinNormal").on("click",function(){var e=$(this);e.hasClass("checkin")&&(e.removeClass("checkin"),Ajax.custom({url:"api/v1/checkin/common"},function(e){if(1e3==e.status){r.over(),Storage.set("hasCheckin",1,!0);var t=Math.floor(Math.random()*g.length),a=new n({type:"ok",isClose:"no",title:"获得"+e.data.commission+"金币",text:"提示：每日前5000名可获得700金币",adImg:g[t].img,adLink:g[t].link});$("#"+a.id+" .ad a").on("click",function(){$("#"+a.id).remove(),$(".pop-mask").remove()})}9001==e.status&&(Storage.set("hasCheckin",1,!0),r.over(),Tools.alertDialog({text:"今天已签到，明天再来吧"}))}))}),$("#readA").on("click",function(){window.location="kmb://main"}),$("#inviteF").on("click",function(){window.location="kmb://invite"}),$("#shareA").on("click",function(){window.location="kmb://back"});var h=new o("#signList"),f=$("#signList .btn");$("#viewList").on("click",function(){var e=$(this);if(e.hasClass("shaodeng"))return void Tools.alertDialog({text:"5s内限查看一次，请稍后再试~"});e.addClass("shaodeng"),setTimeout(function(){e.removeClass("shaodeng")},5e3),t.fun({url:"api/v1/checkin/logs",data:{page:1,page_size:20}}),$("#listPage").hide(),h.openSidebar(),$("#conList").height(innerHeight-f.height())}),f.on("click",function(){h.closeSidebar()})}),define("mod/pagelist",["./base","../plugs/laypage"],function(require,exports,module){var e=require("./base"),t=require("../plugs/laypage");window.Ajax=e,exports.defaultListTmpl="#conList-tmpl",exports.defaultListEle="#conList",exports.pagingDom="#listPage",exports.fun=function(a,i,n){var o=(a.data.page,{renderFor:this.defaultListTmpl,renderEle:this.defaultListEle,pagingDom:this.pagingDom,showLoading:!0,hasNext:!0,logtype:"paging"});for(var s in o)a[s]=a[s]||o[s];t({cont:$(a.pagingDom),pages:100,groups:0,curr:1,prev:!1,next:"点击查看更多",skin:"flow",jump:function(t){var o=this;a.data.page=t.curr,e.baseAjax(a,function(s){1020==s.status?(s.data=null,e.render(a.renderEle,a.renderFor,s,void 0,!0),$(a.pagingDom).remove()):(o.pages=s.total,t.curr==s.total&&(a.hasNext=!1,$(a.pagingDom).find(".laypage_main").html("<span>没有更多数据</span>")),$.each(s.data,function(){this.added_time=e.formatDate(this.added_time)}),i&&$.isFunction(i)&&i(s),1!=s.page?e.render(a.renderEle,a.renderFor,s,void 0,!1):e.render(a.renderEle,a.renderFor,s,void 0,!0),n&&$.isFunction(n)&&n(),$(a.pagingDom).removeClass("hide"))},function(e,t,a){"function"==typeof callbackError&&callbackError(e,t,a)})}}),window.onscroll=function(){if(a.hasNext){var e=document.body.scrollTop,t=document.body.scrollHeight;e+window.screen.height*window.devicePixelRatio+100>t&&$("#laypage_0 a").click()}}}}),define("mod/base",["zepto","../plugs/doT.min","./tools"],function(require,exports,module){function e(e,t){var a=e,i={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}function t(e){var t,a=function(){};if(!e.status)return void Tools.alertDialog({title:"出错了",text:"没有返回status"});if(/1001|1002|1003|1004|1008|1009|1015/.test(e.status))t={title:"提醒",text:e.desc};else if(/1006|1007/.test(e.status)){var i=5;t={title:"提醒",text:"访问太过频繁，<span id='closeTimer'>"+i+"</span>s后自动刷新"};var n=setInterval(function(){i--,i<1&&(clearInterval(n),window.location.reload()),$("#closeTimer").text(i)},1e3)}else{if(1101!=e.status)return t=null,!0;t={title:"提醒",text:"请打开设置->通用->日期与时间校准您的系统时间"}}return null!=t?(Tools.alertDialog(t,a),!1):void 0}var $=require("zepto");var a=require("../plugs/doT.min"),i={key:"26817749",km_api:server+"km_task/"};require("./tools"),module.exports={formatDate:function(t,a){var i=a||"yyyy-MM-dd hh:mm";if(isNaN(t)||null==t)return t;if("object"==typeof t){var n=dd.getFullYear(),o=dd.getMonth()+1,s=dd.getDate();o<10&&(o="0"+o);var r=n+"-"+o+"-"+s,l=r.match(/(\d+)/g),c=new Date(l[0],l[1]-1,l[2]);return e(c,i)}var c=new Date(parseInt(t));return e(c,i)},baseAjax:function(e,a){var n={name:"app_key",value:i.key};e.showLoading&&(0==$(".ui-loading-block").length?$("body").append('<div class="ui-loading-block km-dialog show"><div class="ui-loading-cnt"><i class="ui-loading-bright"></i><p>加载中……</p></div></div>'):$(".ui-loading-block").addClass("show"),"paging"==e.logtype&&0!=e.data.skip||$(e.renderEle).hide()),e.data||(e.data={}),$.isFunction(e.data.push)?e.data.push(n):e.data.app_key=i.key,$.isFunction(e.data.push)?e.data.push({name:"auth_token",value:Tools.auth_token()}):e.data.auth_token=Tools.auth_token(),$.ajax({url:i.km_api+e.url,data:e.data,type:"GET",dataType:"jsonp",xhrFields:{withCredentials:!0},jsonpCallback:"jsonp"+Math.ceil(1e3*Math.random()),success:function(i){e.showLoading&&($(".ui-loading-block").removeClass("show"),"paging"==e.logtype&&0!=e.data.skip||$(e.renderEle).show()),t(i)&&a(i)},error:function(t,a,i){console.log(t),e.showLoading&&$(".ui-loading-block").removeClass("show"),"paging"!=e.logtype&&$(e.renderEle).show()}})},render:function(e,t,i,n,o){if($(t).length>0&&i){var s=n||void 0,r=$(t).text(),l=a.template(r,void 0,s);o?$(e).html(l(i)):$(e).append(l(i))}},custom:function(e,t){var a=this;e=e||{},e.logtype="custom",a.baseAjax(e,t)}}}),define("plugs/doT.min",[],function(require,exports,module){function e(t,a,i){return("string"==typeof a?a:a.toString()).replace(t.define||s,function(e,a,n,o){return 0===a.indexOf("def.")&&(a=a.substring(4)),a in i||(":"===n?(t.defineParams&&o.replace(t.defineParams,function(e,t,n){i[a]={arg:t,text:n}}),a in i||(i[a]=o)):new Function("def","def['"+a+"']="+o)(i)),""}).replace(t.use||s,function(a,n){t.useParams&&(n=n.replace(t.useParams,function(e,t,a,n){if(i[a]&&i[a].arg&&n)return e=(a+":"+n).replace(/'|\\/g,"_"),i.__exp=i.__exp||{},i.__exp[e]=i[a].text.replace(new RegExp("(^|[^\\w$])"+i[a].arg+"([^\\w$])","g"),"$1"+n+"$2"),t+"def.__exp['"+e+"']"}));var o=new Function("def","return "+n)(i);return o?e(t,o,i):o})}function t(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var a,i={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};i.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},a=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(a,function(e){return t[e]||e}):""}},a=function(){return this||(0,eval)("this")}(),void 0!==module&&module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):a.doT=i;var n={start:"'+(",end:")+'",startencode:"'+encodeHTML("},o={start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("},s=/$^/;i.template=function(r,l,c){l=l||i.templateSettings;var u,d,p=l.append?n:o,g=0;r=l.use||l.define?e(l,r,c||{}):r,r=("var out='"+(l.strip?r.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):r).replace(/'|\\/g,"\\$&").replace(l.interpolate||s,function(e,a){return p.start+t(a)+p.end}).replace(l.encode||s,function(e,a){return u=!0,p.startencode+t(a)+p.end}).replace(l.conditional||s,function(e,a,i){return a?i?"';}else if("+t(i)+"){out+='":"';}else{out+='":i?"';if("+t(i)+"){out+='":"';}out+='"}).replace(l.iterate||s,function(e,a,i,n){return a?(g+=1,d=n||"i"+g,a=t(a),"';var arr"+g+"="+a+";if(arr"+g+"){var "+i+","+d+"=-1,l"+g+"=arr"+g+".length-1;while("+d+"<l"+g+"){"+i+"=arr"+g+"["+d+"+=1];out+='"):"';} } out+='"}).replace(l.evaluate||s,function(e,a){return"';"+t(a)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),u&&(l.selfcontained||!a||a._encodeHTML||(a._encodeHTML=i.encodeHTMLSource(l.doNotSkipEncoded)),r="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+i.encodeHTMLSource.toString()+"("+(l.doNotSkipEncoded||"")+"));"+r);try{return new Function(l.varname,r)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+r),e}},i.compile=function(e,t){return i.template(e,null,t)},module.exports=i}),define("mod/tools",[],function(require){var e={getQueryValue:function(e){var t=location.search,a=new Array;if(t.length>1){var i=t.indexOf("?");t=t.substring(i+1,t.length)}else t=null;if(t)for(var n=0;n<t.split("&").length;n++)a[n]=t.split("&")[n];for(var o=0;o<a.length;o++)if(a[o].split("=")[0]==e)return decodeURI(a[o].split("=")[1]);return""},uid:function(){return this.getQueryValue("uid")||"null"},auth_token:function(){return this.getQueryValue("auth_token")||"null"},alertDialog:function(e,t){var a={title:null,text:null,img:null,time:3e3};for(var i in a)e[i]=e[i]||a[i];var n="tips"+(new Date).getTime(),o='<div id="'+n+'" class="ui-popup-screen km-dialog"><div class="ui-overlay-shadow km-popup">';e.time<1&&(o+='<i class="iconfont icon-close" id="close"></i>'),o+='<div class="content">',null!=e.title&&""!=e.title&&(o+="<h1>"+e.title+"</h1>"),null!=e.text&&""!=e.text&&(o+="<p>"+e.text+"</p>"),null!=e.img&&""!=e.img&&(o+='<div class="pic"><img src="'+e.img+'"/></div>'),o+="</div> </div> </div>";var s=$(o).appendTo("body"),r=$("#"+n+" .km-popup").height(),l=$(window).height(),c=(l-r)/2;if($("#"+n+" .km-popup").css("top",c),s.addClass("show-dialog"),$("#close").click(function(){$("#"+n).remove(),$.isFunction(t)&&t()}),e.time>0){var u=e.time;setTimeout(function(){$("#"+n).remove(),$.isFunction(t)&&t()},u)}}};window.Tools=e}),function(){"use strict";function e(i){var n="laypagecss";e.dir="dir"in e?e.dir:o.getpath+"../css/skin/laypage.css",new o(i),e.dir&&!t[a](n)&&o.use(e.dir,n)}e.v="1.3";var t=document,a="getElementById",i="getElementsByTagName",n=0,o=function(e){var t=this;(t.config=e||{}).item=n++,t.render(!0)};o.on=function(e,t,a){return e.attachEvent?e.attachEvent("on"+t,function(){a.call(e,window.even)}):e.addEventListener(t,a,!1),o},o.getpath=function(){var e=document.scripts,t=e[e.length-1].src;return t.substring(0,t.lastIndexOf("/")+1)}(),o.use=function(e,t){},o.prototype.type=function(){var e=this.config;return"object"==typeof e.cont?void 0===e.cont.length?2:3:void 0},o.prototype.view=function(){var t=this,a=t.config,i=[],n={};if(a.pages=0|a.pages,a.curr=0|a.curr||1,a.groups="groups"in a?0|a.groups:5,a.first="first"in a?a.first:"&#x9996;&#x9875;",a.last="last"in a?a.last:"&#x5C3E;&#x9875;",a.prev="prev"in a?a.prev:"&#x4E0A;&#x4E00;&#x9875;",a.next="next"in a?a.next:"&#x4E0B;&#x4E00;&#x9875;",a.pages<=1)return"";for(a.groups>a.pages&&(a.groups=a.pages),n.index=Math.ceil((a.curr+(a.groups>1&&a.groups!==a.pages?1:0))/(0===a.groups?1:a.groups)),a.curr>1&&a.prev&&i.push('<a href="javascript:;" class="laypage_prev" data-page="'+(a.curr-1)+'">'+a.prev+"</a>"),n.index>1&&a.first&&0!==a.groups&&i.push('<a href="javascript:;" class="laypage_first" data-page="1"  title="&#x9996;&#x9875;">'+a.first+"</a><span>&#x2026;</span>"),n.poor=Math.floor((a.groups-1)/2),n.start=n.index>1?a.curr-n.poor:1,n.end=n.index>1?function(){var e=a.curr+(a.groups-n.poor-1);return e>a.pages?a.pages:e}():a.groups,n.end-n.start<a.groups-1&&(n.start=n.end-a.groups+1);n.start<=n.end;n.start++)n.start===a.curr?i.push('<span class="laypage_curr" '+(/^#/.test(a.skin)?'style="background-color:'+a.skin+'"':"")+">"+n.start+"</span>"):i.push('<a href="javascript:;" data-page="'+n.start+'">'+n.start+"</a>");return a.pages>a.groups&&n.end<a.pages&&a.last&&0!==a.groups&&i.push('<span>&#x2026;</span><a href="javascript:;" class="laypage_last" title="&#x5C3E;&#x9875;"  data-page="'+a.pages+'">'+a.last+"</a>"),n.flow=!a.prev&&0===a.groups,(a.curr!==a.pages&&a.next||n.flow)&&i.push(function(){return n.flow&&a.curr===a.pages?'<span class="page_nomore" title="&#x5DF2;&#x6CA1;&#x6709;&#x66F4;&#x591A;">'+a.next+"</span>":'<a href="javascript:;" class="laypage_next" data-page="'+(a.curr+1)+'">'+a.next+"</a>"}()),'<div name="laypage'+e.v+'" class="laypage_main laypageskin_'+(a.skin?function(e){return/^#/.test(e)?"molv":e}(a.skin):"default")+'" id="laypage_'+t.config.item+'">'+i.join("")+function(){return a.skip?'<span class="laypage_total"><label>&#x5230;&#x7B2C;</label><input type="number" min="1" onkeyup="this.value=this.value.replace(/\\D/, \'\');" class="laypage_skip"><label>&#x9875;</label><button type="button" class="laypage_btn">&#x786e;&#x5b9a;</button></span>':""}()+"</div>"},o.prototype.jump=function(e){if(e){for(var t=this,a=t.config,n=e.children,s=e[i]("button")[0],r=e[i]("input")[0],l=0,c=n.length;c>l;l++)"a"===n[l].nodeName.toLowerCase()&&o.on(n[l],"click",function(){var e=0|this.getAttribute("data-page");a.curr=e,t.render()});s&&o.on(s,"click",function(){var e=0|r.value.replace(/\s|\D/g,"");e&&e<=a.pages&&(a.curr=e,t.render())})}},o.prototype.render=function(e){var i=this,n=i.config,o=i.type(),s=i.view();2===o?n.cont.innerHTML=s:3===o?n.cont.html(s):t[a](n.cont).innerHTML=s,n.jump&&n.jump(n,e),i.jump(t[a]("laypage_"+n.item)),n.hash&&!e&&(location.hash="!"+n.hash+"="+n.curr)},"function"==typeof define?define("plugs/laypage",[],function(){return e}):"undefined"!=typeof exports?module.exports=e:window.laypage=e}(),define("plugs/storageCache",[],function(){function e(e,t){var a=(new Date).getTime();this.c=a,t=t||n,this.e=a+1e3*t,this.v=e}function t(e){return"object"==typeof e&&!!(e&&"c"in e&&"e"in e&&"v"in e)}function a(e){return(new Date).getTime()<e.e}var i=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),n=i.getTime(),o={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return e&&JSON.parse(e)}},s={AUTH:"KMAUTH",NAME:"MY-NAME",get:function(e,t){if(this.isLocalStorage()){var a=this.getStorage(t).getItem(e);return a?JSON.parse(a):void 0}},set:function(e,t,a){this.isLocalStorage()&&(t=JSON.stringify(t),this.getStorage(a).setItem(e,t))},remove:function(e,t){this.isLocalStorage()&&this.getStorage(t).removeItem(e)},setCache:function(t,a,i,n){if(this.isLocalStorage()){var s=new e(a,i);this.getStorage(n).setItem(t,o.serialize(s))}},getCache:function(e,i){var n=null;try{var s=this.getStorage(i).getItem(e);n=o.deserialize(s)}catch(e){return null}if(t(n)){if(a(n)){var s=n.v;return s}return this.remove(e),null}return null},getStorage:function(e){return e?sessionStorage:localStorage},isLocalStorage:function(){try{return!!window.localStorage||(console.log("不支持本地存储"),!1)}catch(e){return console.log("本地存储已关闭"),!1}}};window.Storage=s}),define("plugs/version",[],function(require,exports,module){var e,t={},a=navigator.userAgent;if(t.isKM=/KuaiMa/.test(a),t.isKM){var i=a.split("ssy=")[1];e=/iOS|Android/.test(i.split(";")[0])?i.split(";")[2]:i.split(";")[1],t.version=e.replace("V","")}t.userAgent=a,t.equal=function(e){return!!t.isKM&&e==this.version},t.greater=function(e){if(t.isKM){for(var a=this.version.split("."),i=e.split("."),n=!1,o=0;o<a.length&&!(a[o]<i[o]);o++)a[o]>i[o]&&(n=!0);return n}return!1},t.less=function(e){if(t.isKM){for(var a=this.version.split("."),i=e.split("."),n=!1,o=0;o<a.length&&!(a[o]>i[o]);o++)a[o]<i[o]&&(n=!0);return n}return!1},t.gEq=function(e){return!(!this.equal(e)&&!this.greater(e))},t.lEq=function(e){return!(!this.equal(e)&&!this.less(e))},module.exports=t}),define("plugs/timer",[],function(require,exports,module){var e=function(e,t,a,i){this.el=e,this.remaining=t,this.isFirst=!0,this.isStart=a||!1,this.zeroize=function(e){return e<10?"0"+e:""+e},this.callback=i,this.init()};e.prototype.init=function(){var e,t,a,i=this;if(i.isStart){if(0==i.remaining)return $(i.el).html('<em class="h">00</em>:<em class="m">00</em>:<em class="s">00</em>').show().prev().show(),void($.isFunction(i.callback)&&i.callback());$(i.el).prev().html("开抢时间：每日10点"),$("#signin").addClass("over")}else i.remaining>7200?$(i.el).html("今日10点开抢").show():(e=parseInt(i.remaining/3600),t=parseInt(i.remaining%3600/60),a=parseInt(i.remaining%3600%60),$(i.el).html('<em class="h">'+i.zeroize(e)+'</em>:<em class="m">'+i.zeroize(t)+'</em>:<em class="s">'+i.zeroize(a)+"</em>").show().prev().show(),i.count())},e.prototype.count=function(){var e,t,a,i,n,o,s=this;if(a=parseInt($(s.el+" .s").text()),t=parseInt($(s.el+" .m").text()),e=parseInt($(s.el+" .h").text()),i=a>0?a-1:0==t&&0==e?0:59,$(s.el+" .s").text(s.zeroize(i)),0==a&&(n=t>0?t-1:0==e?0:59,$(s.el+" .m").text(s.zeroize(n))),0==a&&0==t&&(o=e>0?e-1:0,$(s.el+" .h").text(s.zeroize(o))),0==i&&0==t&&0==e)return void($.isFunction(s.callback)&&s.callback());setTimeout(function(){s.count()},1e3)},module.exports=e}),define("plugs/tipsAd",[],function(require,exports,module){var e=function(e){var t={isClose:"yes",type:"",title:"",subtit:"",text:"",btnType:"0",hasAd:"1",adImg:"image/ad.png",adLink:"school_invite_0.html"};this.option={};for(var a in t)this.option[a]=e[a]||t[a];this.id="pop_"+(new Date).getTime(),this.init()};e.prototype.init=function(e){var t=this,a=t.option,i=[];i.push('<div class="pop-mask km-dialog"></div>'),i.push('<div class="pop-screen km-dialog" id="'+t.id+'">'),i.push('<div class="box">'),"yes"==a.isClose&&i.push('<i class="iconfont icon-close"></i>'),i.push('<div class="hd-img '+a.type+'"></div>'),""!=a.title&&i.push("<h1>"+a.title+"</h1>"),""!=a.subtit&&i.push("<h3>"+a.subtit+"</h3>"),""!=a.text&&i.push('<div class="text">'+a.text+"</div>"),"1"==a.hasAd&&i.push('<div class="ad"><a href="'+a.adLink+'"><img src="'+a.adImg+'" /></a></div>'),"1"==a.btnType&&i.push('<div class="btnbox"><a class="close">我知道了</a></div>'),i.push("</div></div>"),$("body").append(i.join("")),$("#"+t.id).height($("#"+t.id+" .box").height()),$("#"+t.id+" .icon-close, #"+t.id+" .close").on("click",function(){t.close()})},e.prototype.close=function(){var e=$("#"+this.id);e.prev().remove(),e.remove()},module.exports=e}),define("plugs/secondPage",[],function(require,exports,module){var e=0,t=function(e){var t=this;t.targetPage=$(e),$(e+" .ui-icon-return").click(function(e){e.preventDefault(),t.closeSidebar()})};t.prototype={targetPage:void 0,openPage:function(t){var a=$(window),i=a.width(),n=a.height();this.targetPage.addClass("open").css({width:i,height:n}).show(),e++,$("body").hasClass("move")||$("body").addClass("move"),$("#sidebar-bg").show(),t&&t()},openSidebar:function(t){var a=$(window),i=a.width(),n=a.height(),o=this;this.targetPage.show().css({width:i,height:n}),setTimeout(function(){o.targetPage.addClass("open")},100),$("#sidebar-bg").show(),e++,$("body").hasClass("move")||$("body").addClass("move"),t&&t()},closeSidebar:function(t){var a=this;a.targetPage.removeClass("open"),e--,setTimeout(function(){a.targetPage.hide(),hasOpend=!1,e<=0&&$("body").removeClass("move"),t&&t()},220),$("#sidebar-bg").hide(),window.location.hash=""}},module.exports=t});