define("app/school_xiaoma",["../mod/base","../plugs/secondPage.js","../plugs/version.js","../plugs/confirmTip.js"],function(require,exports,module){function e(e){new i({text:'<p style="color:#333;padding-left:.15rem;padding-right:.15rem;">升级到最新版本，更多任务要你收益涨涨涨！</p>',sureTxt:"马上更新",cancelTxt:"我知道了"},function(e){e&&(window.location="http://a.app.qq.com/o/simple.jsp?pkgname=com.kuaima.browser")})}var t=(require("../mod/base"),require("../plugs/secondPage.js")),n=require("../plugs/version.js"),i=require("../plugs/confirmTip.js"),o=(new Swiper(".swiper-container",{hashNavigation:{watchState:!0},pagination:{el:".swiper-pagination",clickable:!0}}),new t("#openWX"));$("#business").on("click",function(){return/Android/.test(navigator.userAgent)&&n.less("1.2.3")?$("#openWX h2").html('长按 <a style="color:#fa0">快马小报</a> 复制'):window.location="kmb://QQ="+encodeURIComponent("快马小报"),o.openSidebar(),!1}),$("#sidebar-bg").on("touchstart",function(){return o.closeSidebar(),!1}),$(".p_alipay").on("click",function(){window.location="kmb://bindalipay"}),$(".p_tixian").on("click",function(){window.location="kmb://openduiba"}),$(".p_caiji").on("click",function(){n.less("1.4.0")?e():window.location="kmb://worthreadingtab"}),$(".p_jinbi").on("click",function(){n.less("1.5.5")?e():window.location="kmb://myincome"}),$(".p_hongbao").on("click",function(){window.location="kmb://mine"}),$(".p_tuandui").on("click",function(){n.less("1.5.0")?e():window.location="kmb://team_myself"}),$(".p_tuisong").on("click",function(){Tools.alertDialog({text:"等待快马小报的推送吧~每天都有很多次的哦~",time:"0"})}),$(".p_qiandao").on("click",function(){n.less("1.5.5")?e():window.location="kmb://taskcenter"}),$(".p_zhuanfa").on("click",function(){window.location="kmb://mine"}),$(".p_sousuo").on("click",function(){n.less("1.3.2")?e():window.location="kmb://hotsearch"}),$(".p_yuedu").on("click",function(){var e=["3468884","3480962","3471953","3478140","3465790","3484966","3469260","3484989","3483847","3472143"],t=parseInt(e.length*Math.random());window.location="kmb://recommend?url=http://news.zhwnl.cn/article2.html?id="+e[t]+"&id="+e[t]}),n.less("1.5.5")||$("#video").show().on("click",function(){window.location="kmb://animguider"})}),define("mod/base",["zepto","../plugs/doT.min","./tools"],function(require,exports,module){function e(e,t){var n=e,i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t}function t(e){var t,n=function(){};if(!e.status)return void Tools.alertDialog({title:"出错了",text:"没有返回status"});if(/1001|1002|1003|1004|1009|1015/.test(e.status))t={title:"提醒",text:e.desc};else if(/1006/.test(e.status)){var i=5;t={title:"提醒",text:"访问太过频繁，<span id='closeTimer'>"+i+"</span>s后自动刷新"};var o=setInterval(function(){i--,i<1&&(clearInterval(o),window.location.reload()),$("#closeTimer").text(i)},1e3)}else{if(1101!=e.status)return t=null,!0;t={title:"提醒",text:"请打开设置->通用->日期与时间校准您的系统时间"}}return null!=t?(Tools.alertDialog(t,n),!1):void 0}var $=require("zepto");var n=require("../plugs/doT.min"),i={key:"26817749",magic_key:"24817749",km_api:server+"km_task/"};require("./tools"),module.exports={formatDate:function(t,n){var i=n||"yyyy-MM-dd hh:mm";if(isNaN(t)||null==t)return t;if("object"==typeof t){var o=dd.getFullYear(),a=dd.getMonth()+1,s=dd.getDate();a<10&&(a="0"+a);var r=o+"-"+a+"-"+s,l=r.match(/(\d+)/g),c=new Date(l[0],l[1]-1,l[2]);return e(c,i)}var c=new Date(parseInt(t));return e(c,i)},baseAjax:function(e,n){var o=navigator.userAgent,a=i.key;/magic/.test(o)&&(a=i.magic_key);var s={name:"app_key",value:a};e.showLoading&&(0==$(".ui-loading-block").length?$("body").append('<div class="ui-loading-block km-dialog show"><div class="ui-loading-cnt"><i class="ui-loading-bright"></i><p>加载中……</p></div></div>'):$(".ui-loading-block").addClass("show"),"paging"==e.logtype&&0!=e.data.skip||$(e.renderEle).hide()),e.data||(e.data={}),$.isFunction(e.data.push)?e.data.push(s):e.data.app_key=a,$.isFunction(e.data.push)?e.data.push({name:"auth_token",value:Tools.auth_token()}):e.data.auth_token=Tools.auth_token(),$.ajax({url:i.km_api+e.url,data:e.data,type:"GET",dataType:"jsonp",xhrFields:{withCredentials:!0},jsonpCallback:"jsonp"+Math.ceil(1e3*Math.random()),success:function(i){e.showLoading&&($(".ui-loading-block").removeClass("show"),"paging"==e.logtype&&0!=e.data.skip||$(e.renderEle).show()),t(i)&&n(i)},error:function(t,n,i){console.log(t),e.showLoading&&$(".ui-loading-block").removeClass("show"),"paging"!=e.logtype&&$(e.renderEle).show()}})},render:function(e,t,i,o,a){if($(t).length>0&&i){var s=o||void 0,r=$(t).text(),l=n.template(r,void 0,s);a?$(e).html(l(i)):$(e).append(l(i))}},custom:function(e,t){var n=this;e=e||{},e.logtype="custom",n.baseAjax(e,t)}}}),define("plugs/doT.min",[],function(require,exports,module){function e(t,n,i){return("string"==typeof n?n:n.toString()).replace(t.define||s,function(e,n,o,a){return 0===n.indexOf("def.")&&(n=n.substring(4)),n in i||(":"===o?(t.defineParams&&a.replace(t.defineParams,function(e,t,o){i[n]={arg:t,text:o}}),n in i||(i[n]=a)):new Function("def","def['"+n+"']="+a)(i)),""}).replace(t.use||s,function(n,o){t.useParams&&(o=o.replace(t.useParams,function(e,t,n,o){if(i[n]&&i[n].arg&&o)return e=(n+":"+o).replace(/'|\\/g,"_"),i.__exp=i.__exp||{},i.__exp[e]=i[n].text.replace(new RegExp("(^|[^\\w$])"+i[n].arg+"([^\\w$])","g"),"$1"+o+"$2"),t+"def.__exp['"+e+"']"}));var a=new Function("def","return "+o)(i);return a?e(t,a,i):a})}function t(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var n,i={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};i.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(n,function(e){return t[e]||e}):""}},n=function(){return this||(0,eval)("this")}(),void 0!==module&&module.exports?module.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):n.doT=i;var o={start:"'+(",end:")+'",startencode:"'+encodeHTML("},a={start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("},s=/$^/;i.template=function(r,l,c){l=l||i.templateSettings;var u,d,p=l.append?o:a,g=0;r=l.use||l.define?e(l,r,c||{}):r,r=("var out='"+(l.strip?r.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):r).replace(/'|\\/g,"\\$&").replace(l.interpolate||s,function(e,n){return p.start+t(n)+p.end}).replace(l.encode||s,function(e,n){return u=!0,p.startencode+t(n)+p.end}).replace(l.conditional||s,function(e,n,i){return n?i?"';}else if("+t(i)+"){out+='":"';}else{out+='":i?"';if("+t(i)+"){out+='":"';}out+='"}).replace(l.iterate||s,function(e,n,i,o){return n?(g+=1,d=o||"i"+g,n=t(n),"';var arr"+g+"="+n+";if(arr"+g+"){var "+i+","+d+"=-1,l"+g+"=arr"+g+".length-1;while("+d+"<l"+g+"){"+i+"=arr"+g+"["+d+"+=1];out+='"):"';} } out+='"}).replace(l.evaluate||s,function(e,n){return"';"+t(n)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),u&&(l.selfcontained||!n||n._encodeHTML||(n._encodeHTML=i.encodeHTMLSource(l.doNotSkipEncoded)),r="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+i.encodeHTMLSource.toString()+"("+(l.doNotSkipEncoded||"")+"));"+r);try{return new Function(l.varname,r)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+r),e}},i.compile=function(e,t){return i.template(e,null,t)},module.exports=i}),define("mod/tools",[],function(require){var e={getQueryValue:function(e){var t=location.search,n=new Array;if(t.length>1){var i=t.indexOf("?");t=t.substring(i+1,t.length)}else t=null;if(t)for(var o=0;o<t.split("&").length;o++)n[o]=t.split("&")[o];for(var a=0;a<n.length;a++)if(n[a].split("=")[0]==e)return decodeURI(n[a].split("=")[1]);return""},uid:function(){return this.getQueryValue("uid")||"null"},auth_token:function(){return this.getQueryValue("auth_token")||"null"},alertDialog:function(e,t){var n={title:null,text:null,img:null,time:3e3};for(var i in n)e[i]=e[i]||n[i];var o="tips"+(new Date).getTime(),a='<div id="'+o+'" class="ui-popup-screen km-dialog"><div class="ui-overlay-shadow km-popup">';e.time<1&&(a+='<i class="iconfont icon-close" id="close"></i>'),a+='<div class="content">',null!=e.title&&""!=e.title&&(a+="<h1>"+e.title+"</h1>"),null!=e.text&&""!=e.text&&(a+="<p>"+e.text+"</p>"),null!=e.img&&""!=e.img&&(a+='<div class="pic"><img src="'+e.img+'"/></div>'),a+="</div> </div> </div>";var s=$(a).appendTo("body"),r=$("#"+o+" .km-popup").height(),l=$(window).height(),c=(l-r)/2;if($("#"+o+" .km-popup").css("top",c),s.addClass("show-dialog"),$("#close").click(function(){$("#"+o).remove(),$.isFunction(t)&&t()}),e.time>0){var u=e.time;setTimeout(function(){$("#"+o).remove(),$.isFunction(t)&&t()},u)}}};window.Tools=e}),define("plugs/secondPage",[],function(require,exports,module){var e=0,t=function(e){var t=this;t.targetPage=$(e),$(e+" .ui-icon-return").click(function(e){e.preventDefault(),t.closeSidebar()})};t.prototype={targetPage:void 0,openPage:function(t){var n=$(window),i=n.width(),o=n.height();this.targetPage.addClass("open").css({width:i,height:o}).show(),e++,$("body").hasClass("move")||$("body").addClass("move"),$("#sidebar-bg").show(),t&&t()},openSidebar:function(t){var n=$(window),i=n.width(),o=n.height(),a=this;this.targetPage.show().css({width:i,height:o}),setTimeout(function(){a.targetPage.addClass("open")},100),$("#sidebar-bg").show(),e++,$("body").hasClass("move")||$("body").addClass("move"),t&&t()},closeSidebar:function(t){var n=this;n.targetPage.removeClass("open"),e--,setTimeout(function(){n.targetPage.hide(),hasOpend=!1,e<=0&&$("body").removeClass("move"),t&&t()},220),$("#sidebar-bg").hide(),window.location.hash=""}},module.exports=t}),define("plugs/version",[],function(require,exports,module){var e,t={},n=navigator.userAgent;if(t.isKM=/KuaiMa/.test(n),t.isKM){var i=n.split("ssy=")[1];e=/iOS|Android/.test(i.split(";")[0])?i.split(";")[2]:i.split(";")[1],t.version=e.replace("V","")}t.userAgent=n,t.equal=function(e){return!!t.isKM&&e==this.version},t.greater=function(e){if(t.isKM){for(var n=this.version.split("."),i=e.split("."),o=!1,a=0;a<n.length&&!(n[a]<i[a]);a++)n[a]>i[a]&&(o=!0);return o}return!1},t.less=function(e){if(t.isKM){for(var n=this.version.split("."),i=e.split("."),o=!1,a=0;a<n.length&&!(n[a]>i[a]);a++)n[a]<i[a]&&(o=!0);return o}return!1},t.gEq=function(e){return!(!this.equal(e)&&!this.greater(e))},t.lEq=function(e){return!(!this.equal(e)&&!this.less(e))},module.exports=t}),define("plugs/confirmTip",[],function(require,exports,module){var e=function(e,t){var n={title:"",text:"",sureTxt:"确定",cancelTxt:"取消"};this.option={};for(var i in n)this.option[i]=e[i]||n[i];this.id="pop_"+(new Date).getTime(),this.init(t)};e.prototype.init=function(e){var t=this,n=t.option,i=[],o=t.id;i.push('<div class="pop-mask km-dialog"></div>'),i.push('<div class="pop-screen km-dialog" id="'+o+'">'),i.push('<div class="box">'),""!=n.title&&i.push("<h2>"+n.title+"</h2>"),""!=n.text&&i.push('<div class="text">'+n.text+"</div>"),i.push('<div class="btnbox"><a class="cancelBtn">'+n.cancelTxt+'</a><a class="sureBtn">'+n.sureTxt+"</a></div>"),i.push("</div></div>"),$("body").append(i.join("")),$("#"+o).height($("#"+o+" .box").height()),$("#"+o+" .sureBtn").click(function(){$("#"+o).prev().remove(),$("#"+o).remove(),$.isFunction(e)&&e(!0)}),$("#"+o+" .cancelBtn").click(function(){$("#"+o).prev().remove(),$("#"+o).remove(),$.isFunction(e)&&e(!1)})},module.exports=e});