define("app/ani_timeMac",["../mod/base2"],function(require,exports,module){function t(t){for(var a=document.getElementById("bingtu"),e=a.getContext("2d"),i=2*Math.PI,o=0;o<t.length;o++)e.fillStyle=t[o].color,e.strokeStyle=t[o].color,e.beginPath(),e.moveTo(88,80),e.arc(88,90,86,i,i-2*Math.PI*(t[o].pre/100),!0),e.fill(),e.stroke(),i-=2*Math.PI*(t[o].pre/100),e.fillRect(190,30*o+20,16,16),e.font="20px serif",e.fillStyle="#fff",e.fillText(t[o].txt,216,30*o+35);return'<img src="'+a.toDataURL("image/png")+'"/>'}function a(t,a,e,n){$("#loading").remove();bodymovin.loadAnimation(o);if(t&&""!=t)setTimeout(function(){$("#content1").html('<div class="txt">'+t+"</div>").addClass("animate1"),$("#content2").html('<div class="txt">'+a+"</div>").addClass("animate2"),$("#content3").html('<div class="txt">'+e+'</div><div id="imgbox">'+n+'</div><div class="txt txt_">悄悄支个招哦：<span class="big">'+(/收徒/.test(e)?"搜索任务":"邀请收徒")+"</span>是最赚钱的！</div>").addClass("animate3")},5e3),setTimeout(function(){$("#myDate").append('<a class="reload" href="javascript:location.reload();"></a><a class="download" href="javascript:void(0)">'+(/kuaima/.test(i)?"立即分享，赚宝箱":"生成我的时光机")+"</a>")},21e3);else{$("#myDate").css({"background-image":"url(images/nodate/bg0.png)","background-color":"#241f1f"}).addClass("opa_in"),$("#content").addClass("nodate");var s=[];s.push('<div id="nodate1"><div class="logo"><img src="images/timelogo.png" /></div>'),s.push('<div class="text"><img src="images/nodate/text.png" /></div>'),s.push('<div class="zhutu" id="zhutu">'),s.push('<div class="box box_2"><img src="images/nodate/no2_t.png" class="tit" /><img src="images/nodate/no2_txt.png" class="txt" /></div>'),s.push('<div class="box box_1"><img src="images/nodate/no1_t.png" class="tit" /><img src="images/nodate/no1_txt.png" class="txt" /></div>'),s.push('<div class="box box_3"><img src="images/nodate/no3_t.png" class="tit" /><img src="images/nodate/no3_txt.png" class="txt" /></div>'),s.push("</div></div>"),s.push('<div id="nodate2"><img src="images/nodate/nodate2.png" /></div>'),$("#content").html(s.join("")),setTimeout(function(){$("#zhutu .box").eq(1).height("206px").find(".tit,.txt").addClass("opa_in_1"),$("#zhutu .box").eq(0).height("146px").find(".tit,.txt").addClass("opa_in_2"),$("#zhutu .box").eq(2).height("112px").find(".tit,.txt").addClass("opa_in_3"),$("#nodate1").addClass("opa_out"),$("#nodate2").show().addClass("opa_in")},4300),setTimeout(function(){$("#nodate1").remove(),$("#myDate").css("background","#ffbb10"),$("#myDate").append('<a class="reload" href="javascript:location.reload();"></a><a class="download" href="javascript:void(0)">'+(/kuaima/.test(i)?"立即分享，赚宝箱":"生成我的时光机")+"</a>")},8e3)}}var e=require("../mod/base2");$("#loading").height(innerHeight),$("#loading .load_img").css("margin-top",innerHeight/2-200);var i=navigator.userAgent.toLocaleLowerCase(),o={wrapper:document.getElementById("bodymovin"),animType:"canvas",loop:!1,prerender:!0,autoplay:!0,path:"data.json"};$("#myDate").on("click",".download",function(){/kuaima/.test(i)?e.custom({url:"api/v1/sgj/share"}):window.location="http://share.51xiaoli.cn/inviteReg.html"+("null"==Tools.uid?"":"?uid="+Tools.uid())}),function(i){function o(){var n=Tools.uid();if("null"==n)return void a();e.custom({url:"api/v1/sgj/data",data:{uid:n}},function(n){if(1020==n.status)return void setTimeout(function(){o()},2e3);if(1e3!=n.status)return void a();for(var s,l,r,d=n.data,c={pre:"",obj:""},u=e.formatDate(d.register_time,"yyyy-MM-dd"),p=0;p<i.length;p++)if(d.total_income<i[p].max){var g=i[p].obj.split("、"),m=parseInt(g.length*Math.random());c.pre=i[p].pre,c.obj=g[m];break}(s=u+(""==d.father_nick?"":"，在"+d.father_nick+"好友的邀请下")+'，我加入了快马小报。现累计赚取了<span class="rmb">'+d.total_income+"</span>元，相当于"+c.obj+"的价值哦！",0==d.first_withdraw_time)?l="原来在家就能躺着赚钱啦！看着收益涨涨涨，我真的很开心~~":l=e.formatDate(d.first_withdraw_time,"yyyy-MM-dd")+'，我在快马小报赚的第一笔钱<span class="rmb">'+d.first_withdraw_amount+"</span>元快速到账啦！原来在家就能躺着赚钱啦！";var h=d.invite_coin,v=d.share_task_coin,f=d.search_task_coin,x=d.read_article_coin;check_coin=d.checkin_coin;var b=h+v+f+x+check_coin,_=[];_.push(parseInt(h/b*100)),_.push(parseInt(v/b*100)),_.push(parseInt(f/b*100)),_.push(parseInt(x/b*100)),_.push(parseInt(check_coin/b*100));var k=100-_[0]-_[1]-_[2]-_[3]-_[4];k>0&&(_[2]+=k);for(var y=[{pre:_[0],color:"#83be4f",txt:"邀请收徒"},{pre:_[1],color:"#6e44e5",txt:"转发任务"},{pre:_[2],color:"#ffa628",txt:"搜索任务"},{pre:_[3],color:"#ffdd3c",txt:"阅读文章"},{pre:_[4],color:"#06b8ec",txt:"每日签到"}],w=_[0],j="邀请收徒",p=1;p<_.length;p++)_[p]>w&&(w=this[p],j=y[p].txt);r='<span class="rmb">'+j+"</span>是我收入中赚取最多的，当前击败了"+c.pre+"的快马用户",a(s,l,r,t(y))})}o()}([{max:3,pre:"15%",obj:"5根棒棒糖、1瓶矿泉水、1根玉米、1根萝卜、1个南瓜、1捆青菜、1斤地瓜、1斤土豆、1份小葱、1根黄瓜、1包食盐、1包味精、1包榨菜、2个馒头、1瓶啤酒、1只咸鸭蛋、1个西红柿、1根香蕉、1个苹果、1个橙子"},{max:5,pre:"20%",obj:"1颗西蓝花、1罐旺旺、1桶泡面、1瓶绿茶、1包薯片、1袋话梅、1袋瓜子、1块肥皂、5个鸡蛋、1菜盆、1双手套、1袋饼干、1包卫龙辣条、1瓶脉动、1罐椰汁、1瓶可乐、1个火龙果、1袋手帕纸、1个运动毽子、1张贺卡"},{max:10,pre:"30%",obj:"1包面条、1瓶老干妈、1瓶酱油、1瓶香醋、1打抽纸、1瓶洗洁精、1打衣架、1罐红牛、1根甘蔗、1个柚子、1个手抓饼、1个煎饼果子、1碗馄饨、1个灯泡、1个插座、1把钥匙、1把螺丝刀、1个挂钩、1个漱口杯、1个花瓶"},{max:20,pre:"30%",obj:"1条鲫鱼、1条鲈鱼、1瓶大宝、1双棉拖、1条毛巾、1个汉堡、1支毛笔、1个羽毛球、1个秒表、1对快板、1本学生课本、1个手电筒、1罐蜂蜜、1双凉拖、1套饭盒、1套水彩笔、1个发箍、1顶太阳帽、1把雨伞、1件雨衣"},{max:50,pre:"30%",obj:"1份仔排、1斤牛肉、1斤羊肉、1只母鸡、1只土鸭、1斤鸡腿、1箱牛奶、1箱哇哈哈、1袋大米、1桶香喷喷油、1个暖手袋、1瓶洗发露、1瓶洗衣液、2张电影票、1对枕头、1根跳绳、1个U盘、1个水龙头、1包茶叶、1斤龙虾"},{max:100,pre:"30%",obj:"1个电水壶、1个电子秤、1包纸尿裤、1个运动手环、1对乒乓球拍、1对滑雪手套、1副象棋、1张瑜伽垫、1块运动滑板、1个无线路由器、1个台灯、1套门锁、1把扳手、1盒坚果大礼包"},{max:500,pre:"30%",obj:"1个电饭煲、1个电磁炉、1个吹风机、1个电火锅、1个豆浆机、1床品四件套、1个电热毯、1罐奶粉、1根手链、1瓶葡萄酒、1顿牛排大餐、1个微波炉、1台取暖器、1个电烤箱、1旅行箱、1个篮球、1根钓鱼竿、1双溜冰鞋、1个儿童电话手表、1个电视盒子"},{max:1e3,pre:"30%",obj:"1瓶梦之蓝、1电烤箱、1台麻将桌、1台智能打印机、1个大衣柜、1套餐桌、1个吸顶灯、1台消毒柜、1套洗碗机"},{max:5e3,pre:"30%",obj:"1台空调、1台冰箱、1台洗衣机、1台超清智能电视、1个热水器、1个洗碗机、1台空气净化器、1个按摩椅、1数码相机、1扫地机器人、1套家庭影院、1台跑步机、1套沙发、1台华为手机、1台小米手机、1台oppo手机、1台摄像机、1辆摩托车、1辆电瓶车"},{max:1e4,pre:"80%",obj:"1台iPhone X、1台苹果电脑、1趟东南亚游、1台无人摄像机"},{max:9999999,pre:"85%",obj:"1个钻戒、1条爱马仕皮带、1LV手包、1浪琴手表、1台钢琴、1趟美洲游、1趟欧洲游、1趟澳洲游"}])}),define("mod/base2",["zepto","./tools"],function(require,exports,module){function t(t,a){var e=t,i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in i)new RegExp("("+o+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return a}function a(t){var a,e=function(){};if(!t.status)return void Tools.alertDialog({title:"出错了",text:"没有返回status"});if(/1001|1002|1003|1009|1101|1015/.test(t.status))a={title:"提醒",text:t.desc};else{if(!/1006/.test(t.status))return/1004|1013/.test(t.status)?(weChatAuth(),!1):(a=null,!0);var i=5;a={title:"提醒",text:"访问太过频繁，<span id='closeTimer'>"+i+"</span>s后自动刷新"};var o=setInterval(function(){i--,i<1&&(clearInterval(o),window.location.reload()),$("#closeTimer").text(i)},1e3)}return null!=a?(Tools.alertDialog(a,e),!1):void 0}var $=require("zepto");var e={key:"26817749",magic_key:"24817749",km_api:server+"km_task/"};require("./tools"),module.exports={formatDate:function(a,e){var i=e||"yyyy-MM-dd hh:mm";if(isNaN(a)||null==a)return a;if("object"==typeof a){var o=dd.getFullYear(),n=dd.getMonth()+1,s=dd.getDate();n<10&&(n="0"+n);var l=o+"-"+n+"-"+s,r=l.match(/(\d+)/g),d=new Date(r[0],r[1]-1,r[2]);return t(d,i)}var d=new Date(parseInt(a));return t(d,i)},baseAjax:function(t,i){var o=(navigator.userAgent,e.key),n=Tools.auth_token(),s={name:"app_key",value:o};t.showLoading&&(0==$(".ui-loading-block").length?$("body").append('<div class="ui-loading-block km-dialog show"><div class="ui-loading-cnt"><i class="ui-loading-bright"></i><p>加载中……</p></div></div>'):$(".ui-loading-block").addClass("show")),t.data||(t.data={}),$.isFunction(t.data.push)?t.data.push(s):t.data.app_key=o,$.isFunction(t.data.push)?t.data.push({name:"auth_token",value:n}):t.data.auth_token=n,$.ajax({url:e.km_api+t.url,data:t.data,type:"GET",dataType:"jsonp",xhrFields:{withCredentials:!0},jsonpCallback:"jsonp"+Math.ceil(1e3*Math.random()),success:function(e){t.showLoading&&$(".ui-loading-block").removeClass("show"),a(e)&&i(e)},error:function(a,e,i){console.log(a),t.showLoading&&$(".ui-loading-block").removeClass("show")}})},custom:function(t,a){var e=this;t=t||{},e.baseAjax(t,a)}}}),define("mod/tools",[],function(require){var t={getQueryValue:function(t){var a=location.search,e=new Array;if(a.length>1){var i=a.indexOf("?");a=a.substring(i+1,a.length)}else a=null;if(a)for(var o=0;o<a.split("&").length;o++)e[o]=a.split("&")[o];for(var n=0;n<e.length;n++)if(e[n].split("=")[0]==t)return decodeURI(e[n].split("=")[1]);return""},uid:function(){return this.getQueryValue("uid")||"null"},auth_token:function(){return this.getQueryValue("auth_token")||"null"},alertDialog:function(t,a){var e={title:null,text:null,img:null,time:3e3};for(var i in e)t[i]=t[i]||e[i];var o="tips"+(new Date).getTime(),n='<div id="'+o+'" class="ui-popup-screen km-dialog"><div class="ui-overlay-shadow km-popup">';t.time<1&&(n+='<i class="iconfont icon-close" id="close"></i>'),n+='<div class="content">',null!=t.title&&""!=t.title&&(n+="<h1>"+t.title+"</h1>"),null!=t.text&&""!=t.text&&(n+="<p>"+t.text+"</p>"),null!=t.img&&""!=t.img&&(n+='<div class="pic"><img src="'+t.img+'"/></div>'),n+="</div> </div> </div>";var s=$(n).appendTo("body"),l=$("#"+o+" .km-popup").height(),r=$(window).height(),d=(r-l)/2;if($("#"+o+" .km-popup").css("top",d),s.addClass("show-dialog"),$("#close").click(function(){$("#"+o).remove(),$.isFunction(a)&&a()}),t.time>0){var c=t.time;setTimeout(function(){$("#"+o).remove(),$.isFunction(a)&&a()},c)}}};window.Tools=t});